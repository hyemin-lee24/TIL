## ⚙️ 캐시 생성 시 고려사항

### 1. **캐시 모드 비교**

| 구분             | PARTITIONED (기본값)                                         | REPLICATED                                                |
| ---------------- | ------------------------------------------------------------ | --------------------------------------------------------- |
| 데이터 저장 방식 | 데이터가 노드들에 **분산 저장**                              | 모든 노드에 **전체 데이터 복제**                          |
| 백업 설정        | `backupCount`로 복제 노드 수 설정 가능                       | 설정 불필요 (모든 노드 복제)                              |
| 장점             | - **스케일아웃 용이**  <br />- **메모리 효율적**             | - **읽기 성능 뛰어남**  <br />- **데이터 접근 속도 빠름** |
| 단점             | - 특정 데이터는 특정 노드에만 존재 <br />- 백업 설정 부족 시 장애에 취약 | - **메모리 소모 큼**  <br />- 노드 수 늘수록 동기화 부하  |
| 장애 복구        | 백업 노드 기반 복구 (백업이 있어야 안전)                     | 복구 불필요 (모든 노드 동일 데이터)                       |
| 네트워크 비용    | 낮음 (필요 시 통신)                                          | 높음 (전체 동기화 발생)                                   |
| 적합한 경우      | - 대용량 데이터  <br />- 스케일아웃 중요  <br />- 일반 캐시용 | - 데이터량 적음  <br />- 높은 일관성/읽기속도 필요        |

> 🔍 **주의**: PARTITIONED 모드 사용 시, `backupCount=0`이면 노드 장애 시 해당 데이터 유실됨. 운영 환경에서는 반드시 1 이상 권장.



## 🛡 Partition Loss Policy 설정

- 사용 설정: `PartitionLossPolicy.READ_WRITE_SAFE`
- 의미:
  - 파티션 손실 발생 시에도 **읽기/쓰기 모두 안전하게 처리**
  - 최소한의 데이터 보존을 기반으로 동작 (무결성 보장에 강점)
- 대안 정책:
  - `IGNORE`: 파티션 손실 무시 (데이터 무결성 위험)
  - `READ_ONLY_SAFE`: 읽기는 허용, 쓰기는 금지
  - `READ_WRITE_ALL`: 전체 노드가 있어야만 읽기/쓰기 허용 